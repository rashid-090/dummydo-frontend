import{j as e,v as F,r as h,B as g}from"./index-BqrgJd63.js";import{N as K,b as U,d as Y,c as Z,e as q}from"./adminConnections-DDvIWPhr.js";import{T as x,a as s,b as L,P as E,c as O,d as G,e as R,f as J}from"./TableRow-CTZ5-s8M.js";import"./createSvgIcon-VxZs8Ic3.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";const Q=({index:b,price:c,priceModalHandler:f,deleteModalHandler:p})=>e.jsxs(x,{children:[e.jsx(s,{children:e.jsx("div",{className:"text-center",children:b+1})}),e.jsx(s,{children:e.jsx("div",{className:"text-left capitalize",children:c.countryName})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:c.currencySymbol})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:c.baseRate})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:c.roundTripRate})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:c.fastProcessSurCharge})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:c.flightWithHotelSurCharge})}),e.jsx(s,{children:e.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[e.jsx("button",{onClick:()=>f(c),className:"cursor-pointer bg-main px-5 py-1 rounded-sm text-white hover:bg-green-600",children:"Update"}),e.jsx("button",{onClick:()=>p({_id:c._id,countryName:c.countryName}),children:e.jsx(F,{className:"w-4 h-4 hover:text-red-600"})})]})})]}),X=6,k={_id:"",countryName:"",currencySymbol:"",baseRate:"",roundTripRate:"",fastProcessSurCharge:"",flightWithHotelSurCharge:""},ne=()=>{const[b,c]=h.useState(1),[f,p]=h.useState(!1),[I,w]=h.useState(!1),[y,N]=h.useState([]),[n,T]=h.useState(k),[d,v]=h.useState(k),[S,_]=h.useState({_id:"",countryName:""}),W=async()=>{const t=await U();t!=null&&t.data?N(t.data):g.error(t.message)};h.useEffect(()=>{W()},[]);const P=()=>{w(!I)},A=t=>{w(!0),_(t)},D=()=>{p(!f)},V=(t={})=>{p(!0),v({});const a=document.getElementsByClassName("priceInput");for(const i of a)i.value="";T(t)},z=async()=>{const t=await Y(S._id);t!=null&&t.status&&(w(!1),N(a=>a.filter(i=>i._id!==S._id)),g.success(t.message),_({_id:"",countryName:""}))},B=(t,a)=>{c(a)},H=t=>{const a=t.target.value;(/[^a-zA-Z\s]+$/.test(a)||/\s{2,}/.test(a))&&(t.target.value=a.slice(0,-1))},C=t=>{const a=t.target.value;a.startsWith("0")&&(t.target.value=a.slice(1)),a.length>t.target.maxLength&&(t.target.value=a.slice(0,t.target.maxLength));const i=a.indexOf(".");i!==-1&&a.substring(i+1).length>2&&(t.target.value=a.substring(0,i+3))},m=t=>{const{name:a,value:i}=t.target;v(l=>({...l,[a]:i}))},$=async()=>{const t=a=>{for(const i in a)return!0;return!1};if(n._id){const a={};if((r=>(Object.entries(r).map(o=>{o[1].length&&(a[`${o[0]}`]=o[1])}),t(a)))(d)){a._id=n._id;const r=await Z(a);if(r!=null&&r.status){g.success(r.message),v({});const o=document.getElementsByClassName("priceInput");for(const u of o)u.value="";T(r.data),N(u=>u.map(j=>j._id===n._id?r.data:j))}else g.error(r.message)}}else if((l=>{const r=t(l);if(r){const o=Object.keys(l).length==6,u=Object.values(l).every(j=>j!==void 0&&typeof j=="string"&&j.length>0);return!!(o&&u)}return r})(d)){const l=await q(d);l!=null&&l.status?(g.success(l.message),N(r=>[...r,l.data].sort((o,u)=>o.countryName.localeCompare(u.countryName))),p(!1),v(k)):g.error(l.message)}};return e.jsxs("main",{children:[e.jsx(K,{}),e.jsxs("div",{className:"py-6 w-10/12 mx-auto",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{onClick:V,className:"cursor-pointer bg-main px-5 py-1 rounded-sm text-white hover:bg-green-600",children:"Add"})}),e.jsxs(L,{component:E,children:[e.jsxs(O,{children:[e.jsx(G,{className:"bg-gray-200",children:e.jsxs(x,{children:[e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Sl. No."})}),e.jsx(s,{children:e.jsx("div",{className:"text-left",children:"Country"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Currency"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"One Way"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Round Trip"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Fast Processing Fee"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Flight + Hotel"})}),e.jsx(s,{children:e.jsx("div",{className:"text-center",children:"Actions"})})]})}),e.jsx(R,{children:y!=null&&y.length?y.map((t,a)=>e.jsx(Q,{index:a,price:t,priceModalHandler:V,deleteModalHandler:A},t._id)):null})]}),e.jsx(J,{className:"float-right py-3",count:Math.ceil(b/X),page:b,onChange:B})]})]}),f&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:D,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:e.jsxs("div",{className:"bg-white text-center p-5",children:[e.jsx("h3",{className:"font-medium text-xl mb-2",children:n!=null&&n.countryName?"Edit":"Add"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(L,{component:E,children:e.jsx(O,{children:e.jsxs(R,{children:[e.jsxs(x,{children:[e.jsx(s,{children:"Country Name"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.countryName)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.countryName,name:"countryName",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput capitalize",type:"text",maxLength:40,onInput:t=>H(t)})})]}),e.jsxs(x,{children:[e.jsx(s,{children:"Currency Symbol"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.currencySymbol)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.currencySymbol,name:"currencySymbol",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput uppercase",type:"text",maxLength:3,onInput:t=>H(t)})})]}),e.jsxs(x,{children:[e.jsx(s,{children:"One-Way Fare"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.baseRate)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.baseRate,name:"baseRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:t=>C(t)})})]}),e.jsxs(x,{children:[e.jsx(s,{children:"Round-Trip Fare"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.roundTripRate)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.roundTripRate,name:"roundTripRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:t=>C(t)})})]}),e.jsxs(x,{children:[e.jsx(s,{children:"Fast Processing Fare"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.fastProcessSurCharge)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.fastProcessSurCharge,name:"fastProcessSurCharge",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:t=>C(t)})})]}),e.jsxs(x,{children:[e.jsx(s,{children:"Flight + Hotel Fare"}),e.jsx(s,{children:e.jsx("h4",{className:"text-green-600",children:(n==null?void 0:n.flightWithHotelSurCharge)||""})}),e.jsx(s,{children:e.jsx("input",{onChange:m,defaultValue:d.flightWithHotelSurCharge,name:"flightWithHotelSurCharge",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:t=>C(t)})})]})]})})}),e.jsx("button",{type:"submit",onClick:$,className:"bg-main hover:bg-green-600 text-white h-10 rounded-md",children:"Submit"})]})]})})]})}),I&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:P,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:e.jsxs("div",{className:"bg-white text-center p-5",children:[e.jsx("h3",{className:"font-medium text-xl",children:"Are you sure you want to delete the price for"}),e.jsxs("h3",{className:"font-medium text-xl",children:[S.countryName," ?"]}),e.jsxs("div",{className:"flex justify-center gap-2 p-2",children:[e.jsx("button",{onClick:z,className:"bg-main hover:bg-green-600 text-white h-10 rounded-md px-4",children:"Yes"}),e.jsx("button",{onClick:P,className:"bg-slate-400 hover:bg-slate-600 text-white h-10 rounded-md px-4",children:"No"})]})]})})]})})]})};export{ne as default};
