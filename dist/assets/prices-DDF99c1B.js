import{j as e,t as K,r as m,B as g}from"./index-DE2IoC2z.js";import{N as Y,b as Z,d as q,c as F,e as G}from"./adminConnections-DJnSS9DH.js";import{T as o,a as t,b as V,P as O,c as L,d as J,e as _,f as Q}from"./TableRow-B-ADh7Er.js";import"./createSvgIcon-Vot4voKo.js";import"./hoist-non-react-statics.cjs-DQogQWOa.js";const X=({index:N,price:r,priceModalHandler:b,deleteModalHandler:y})=>e.jsxs(o,{children:[e.jsx(t,{children:e.jsx("div",{className:"text-center",children:N+1})}),e.jsx(t,{children:e.jsx("div",{className:"text-left capitalize",children:r.countryName})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.currencySymbol})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.oneWayRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.oneWayUrgentRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.oneWayHotelRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.oneWayUrgentHotelRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.roundTripRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.roundTripUrgentRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.roundTripHotelRate})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:r.roundTripUrgentHotelRate})}),e.jsx(t,{children:e.jsxs("div",{className:"flex justify-center gap-2 items-center",children:[e.jsx("button",{onClick:()=>b(r),className:"cursor-pointer bg-main px-5 py-1 rounded-sm text-white hover:bg-green-600",children:"Update"}),e.jsx("button",{onClick:()=>y({_id:r._id,countryName:r.countryName}),children:e.jsx(K,{className:"w-4 h-4 hover:text-red-600"})})]})})]}),P=6,W={_id:"",countryName:"",currencySymbol:"",oneWayRate:"",oneWayUrgentRate:"",oneWayHotelRate:"",oneWayUrgentHotelRate:"",roundTripRate:"",roundTripUrgentRate:"",roundTripHotelRate:"",roundTripUrgentHotelRate:""},ae=()=>{const[N,r]=m.useState(1),[b,y]=m.useState(!1),[T,H]=m.useState(!1),[f,v]=m.useState([]),[s,w]=m.useState(W),[i,R]=m.useState(W),[C,I]=m.useState({_id:"",countryName:""}),E=async()=>{const n=await Z();n!=null&&n.data?v(n.data):g.error(n.message)};m.useEffect(()=>{E()},[]);const U=()=>{H(!T)},A=n=>{H(!0),I(n)},D=()=>{y(!b)},k=(n={})=>{y(!0),R({});const a=document.getElementsByClassName("priceInput");for(const c of a)c.value="";w(n)},z=async()=>{const n=await q(C._id);n!=null&&n.status&&(H(!1),v(a=>a.filter(c=>c._id!==C._id)),g.success(n.message),I({_id:"",countryName:""}))},B=(n,a)=>{r(a)},S=n=>{const a=n.target.value;(/[^a-zA-Z\s]+$/.test(a)||/\s{2,}/.test(a))&&(n.target.value=a.slice(0,-1))},h=n=>{const a=n.target.value;a.startsWith("0")&&(n.target.value=a.slice(1)),a.length>n.target.maxLength&&(n.target.value=a.slice(0,n.target.maxLength));const c=a.indexOf(".");c!==-1&&a.substring(c+1).length>2&&(n.target.value=a.substring(0,c+3))},x=n=>{const{name:a,value:c}=n.target;R(d=>({...d,[a]:c}))},$=async()=>{const n=a=>{for(const c in a)return!0;return!1};if(s._id){const a={};if((l=>(Object.entries(l).map(u=>{u[1].length&&(a[`${u[0]}`]=u[1])}),n(a)))(i)){a._id=s._id;const l=await F(a);if(l!=null&&l.status){g.success(l.message),R({});const u=document.getElementsByClassName("priceInput");for(const j of u)j.value="";w(l.data),v(j=>j.map(p=>p._id===s._id?l.data:p))}else g.error(l.message)}}else if((d=>{const l=n(d);if(l){const u=Object.keys(d).length===10,j=Object.values(d).every(p=>p!==void 0&&typeof p=="string"&&p.length>0);return!!(u&&j)}return l})(i)){const d=await G(i);d!=null&&d.status?(g.success(d.message),v(l=>[...l,d.data].sort((u,j)=>u.countryName.localeCompare(j.countryName))),y(!1),R(W)):g.error(d.message)}};return e.jsxs("main",{children:[e.jsx(Y,{}),e.jsxs("div",{className:"py-6 w-10/12 mx-auto",children:[e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{onClick:k,className:"cursor-pointer bg-main px-5 py-1 rounded-sm text-white hover:bg-green-600",children:"Add"})}),e.jsxs(V,{component:O,children:[e.jsxs(L,{children:[e.jsx(J,{className:"bg-gray-200",children:e.jsxs(o,{children:[e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Sl. No."})}),e.jsx(t,{children:e.jsx("div",{className:"text-left",children:"Country"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Currency"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"One Way"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"One Way Fast"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"One Way + Hotel"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"One Way Fast + Hotel"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Round Trip"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Round trip Fast"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Round trip + Hotel"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Round trip Fast + Hotel"})}),e.jsx(t,{children:e.jsx("div",{className:"text-center",children:"Actions"})})]})}),e.jsx(_,{children:f!=null&&f.length?f.map((n,a)=>e.jsx(X,{index:a,price:n,priceModalHandler:k,deleteModalHandler:A},n._id)):null})]}),e.jsx(Q,{className:"float-right py-3",count:Math.ceil(N/P),page:N,onChange:B})]})]}),b&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:D,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:e.jsxs("div",{className:"bg-white text-center p-5",children:[e.jsx("h3",{className:"font-medium text-xl mb-2",children:s!=null&&s.countryName?"Edit":"Add"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(V,{component:O,children:e.jsx(L,{children:e.jsxs(_,{children:[e.jsxs(o,{children:[e.jsx(t,{children:"Country Name"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.countryName)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.countryName,name:"countryName",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput capitalize",type:"text",maxLength:40,onInput:n=>S(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"Currency Symbol"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.currencySymbol)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.currencySymbol,name:"currencySymbol",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput uppercase",type:"text",maxLength:3,onInput:n=>S(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"One-Way Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.oneWayRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.oneWayRate,name:"oneWayRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"One Way Fast Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.oneWayUrgentRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.oneWayUrgentRate,name:"oneWayUrgentRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"One Way + Hotel Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.oneWayHotelRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.oneWayHotelRate,name:"oneWayHotelRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"One Way Fast + Hotel Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.oneWayUrgentHotelRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.oneWayUrgentHotelRate,name:"oneWayUrgentHotelRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"Round-Trip Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.roundTripRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.roundTripRate,name:"roundTripRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"Round trip Fast Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.roundTripUrgentRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.roundTripUrgentRate,name:"roundTripUrgentRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"Round trip + Hotel Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.roundTripHotelRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.roundTripHotelRate,name:"roundTripHotelRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]}),e.jsxs(o,{children:[e.jsx(t,{children:"Round trip Fast + Hotel Fare"}),e.jsx(t,{children:e.jsx("h4",{className:"text-green-600",children:(s==null?void 0:s.roundTripUrgentHotelRate)||""})}),e.jsx(t,{children:e.jsx("input",{onChange:x,defaultValue:i.roundTripUrgentHotelRate,name:"roundTripUrgentHotelRate",className:"outline-none border border-gray-400 rounded h-8 mx-auto pl-2 priceInput",type:"number",maxLength:8,onInput:n=>h(n)})})]})]})})}),e.jsx("button",{type:"submit",onClick:$,className:"bg-main hover:bg-green-600 text-white h-10 rounded-md",children:"Submit"})]})]})})]})}),T&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",onClick:U,children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:e.jsxs("div",{className:"bg-white text-center p-5",children:[e.jsx("h3",{className:"font-medium text-xl",children:"Are you sure you want to delete the price for"}),e.jsxs("h3",{className:"font-medium text-xl",children:[C.countryName," ?"]}),e.jsxs("div",{className:"flex justify-center gap-2 p-2",children:[e.jsx("button",{onClick:z,className:"bg-main hover:bg-green-600 text-white h-10 rounded-md px-4",children:"Yes"}),e.jsx("button",{onClick:U,className:"bg-slate-400 hover:bg-slate-600 text-white h-10 rounded-md px-4",children:"No"})]})]})})]})})]})};export{ae as default};
